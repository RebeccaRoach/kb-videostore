(this["webpackJsonpvideo-store-consumer"]=this["webpackJsonpvideo-store-consumer"]||[]).push([[0],{30:function(e,t,a){e.exports=a(63)},35:function(e,t,a){},36:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(27),i=a.n(o),r=(a(35),a(7)),l=(a(36),a(10)),s=a(1),d=function(){var e=Object(n.useContext)(C);return c.a.createElement("nav",{className:"nav-style"},c.a.createElement("ul",{className:"nav-ul"},c.a.createElement(l.b,{to:"/"},c.a.createElement("li",{className:"navbar-brand"},"KB Videos")),c.a.createElement(l.b,{to:"/"},c.a.createElement("li",{className:"nav-links"},"Home")),c.a.createElement(l.b,{to:"/search"},c.a.createElement("li",{className:"nav-links"},"Search")),c.a.createElement(l.b,{to:"/library"},c.a.createElement("li",{className:"nav-links"},"Library")),c.a.createElement(l.b,{to:"/customers"},c.a.createElement("li",{className:"nav-links"},"Customers")),c.a.createElement(l.b,{to:"/rentals"},c.a.createElement("li",{className:"nav-links"},"Rentals"))),c.a.createElement("h4",{className:"selected-context"},e.selectedCustomer&&e.selectedCustomer.name),c.a.createElement("h4",{className:"selected-context"},e.selectedMovie&&e.selectedMovie.title))},m=function(){return c.a.createElement("div",{className:"App"},c.a.createElement("header",null,c.a.createElement("div",{class:"overlay"}),c.a.createElement("video",{playsinline:"playsinline",autoplay:"autoplay",muted:"muted",loop:"loop"},c.a.createElement("source",{src:"https://storage.googleapis.com/coverr-main/mp4/Mt_Baker.mp4",type:"video/mp4"})),c.a.createElement("div",{class:"container h-100"},c.a.createElement("div",{class:"d-flex h-100 text-center align-items-center"},c.a.createElement("div",{class:"w-100 text-white"},c.a.createElement("h1",{class:"display-3"},"Get the Popcorn Ready"),c.a.createElement("p",{class:"lead mb-0"},"At KB Videos, it's always movie time."))))),c.a.createElement("div",{class:"mt-5 pt-5 pb-5 footer"},c.a.createElement("div",{class:"container"},c.a.createElement("div",{class:"row mt-5"},c.a.createElement("div",{class:"col copyright"},c.a.createElement("h6",null,c.a.createElement("i",null,"a Time and Space production")),c.a.createElement("p",null,"Directed by Kate && Becca"),c.a.createElement("p",null,c.a.createElement("small",null,"\xa9 2020. All Rights Reserved.")))))))},u=a(8),v=a.n(u),E=function(){var e=Object(n.useState)([]),t=Object(r.a)(e,2),a=t[0],o=t[1],i=Object(n.useContext)(C);return Object(n.useEffect)((function(){v.a.get("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/kb-videostore",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).API_BASE_URL,"customers")).then((function(e){o(e.data)})).catch((function(){alert("Failed to fectch customers")}))}),[]),c.a.createElement("div",{className:"App"},c.a.createElement("table",{className:"table"},c.a.createElement("thead",{className:"thead-light"},c.a.createElement("tr",null,c.a.createElement("th",null,"ID"),c.a.createElement("th",null,"Name"),c.a.createElement("th",null,"Movies checked out"),c.a.createElement("th",null,"Select a Customer"))),c.a.createElement("tbody",null,a.map((function(e){return c.a.createElement("tr",null,c.a.createElement("td",null,e.id),c.a.createElement("td",null,e.name),c.a.createElement("td",null,e.movies_checked_out_count),c.a.createElement("td",null,c.a.createElement("button",{onClick:function(){return i.setSelectedCustomer(e)},className:"add-btn"},"Select")))})))))},p=function(){var e=Object(n.useState)([]),t=Object(r.a)(e,2),a=t[0],o=t[1],i=Object(n.useContext)(C),l=Object(n.useState)(""),s=Object(r.a)(l,2),d=s[0],m=s[1];Object(n.useEffect)((function(){v.a.get("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/kb-videostore",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).API_BASE_URL,"movies")).then((function(e){o(e.data)})).catch((function(){alert("Failed to fetch movies")}))}),[]);var u=d?a.filter((function(e){return e.title.toLowerCase().includes(d.toLowerCase())})):a;return c.a.createElement("div",{className:"jumbotron"},c.a.createElement("h1",{class:"display-3"},"LIBRARY"),c.a.createElement("p",{class:"lead"},"KB Videos Library"),c.a.createElement("input",{className:"search-input",placeholder:"Enter a movie title",name:"search",onChange:function(e){return m(e.target.value)}}),c.a.createElement("hr",{class:"my-2"}),c.a.createElement("div",{className:"movie-cards-container"},u.map((function(e){return c.a.createElement("div",null,c.a.createElement("div",{className:"card promoting-card card-style"},c.a.createElement("div",{className:"card-body d-flex flex-row","data-toggle":"tooltip","data-placement":"bottom",title:e.overview},c.a.createElement("div",null,c.a.createElement("div",{className:"view overlay"},c.a.createElement("img",{src:e.image_url,className:"movie-img",alt:"movie cover image"})),c.a.createElement("h4",{className:"card-title font-weight-bold mb-2"},e.title),c.a.createElement("p",{className:"card-text"},"Release: ",e.release_date))),c.a.createElement("button",{className:"add-btn",onClick:function(){return i.setSelectedMovie(e)}},"Select")))}))))},f=a(16),h=a.n(f),b=a(29),S=a(9),O=a.n(S),g=function(){var e=Object(n.useState)(""),t=Object(r.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)([]),l=Object(r.a)(i,2),s=l[0],d=l[1],m=function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""===a||void 0===a||null===a){e.next=4;break}return e.next=4,v.a.get("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/kb-videostore",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).API_BASE_URL,"movies?query=").concat(a)).then((function(e){d(e.data)})).catch((function(){alert("Requested movie was not found")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(e){v.a.post("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/kb-videostore",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).API_BASE_URL,"movies"),e).then((function(e){S.store.addNotification({title:"Success!",message:"Selected movie has been added to your library",type:"success",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:1500}})})).catch((function(e){S.store.addNotification({title:"Warning!",message:"Selected movie was already added to your library",type:"warning",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:1500}})}))};return c.a.createElement("div",{className:"jumbotron"},c.a.createElement("h1",{className:"display-3"},"SEARCH"),c.a.createElement("p",{className:"lead"},"Find a video to add to Library"),c.a.createElement("hr",{class:"my-2"}),c.a.createElement("input",{className:"search-input",placeholder:"Enter a movie title",name:"search",onChange:function(e){return o(e.target.value)},value:a}),c.a.createElement("button",{className:"pizazz-btn",onClick:m},"Search"),c.a.createElement("div",{className:"movie-cards-container"},s.map((function(e){return c.a.createElement("div",null,c.a.createElement("div",{class:"card promoting-card card-style"},c.a.createElement("div",{class:"card-body d-flex flex-row","data-toggle":"tooltip","data-placement":"bottom",title:e.overview},c.a.createElement("div",null,c.a.createElement("div",{class:"view overlay"},c.a.createElement("img",{src:e.image_url,class:"movie-img",alt:"movie cover image"})),c.a.createElement("h4",{class:"card-title font-weight-bold mb-2"},e.title),c.a.createElement("p",{class:"card-text"},"Release: ",e.release_date))),c.a.createElement("button",{className:"add-btn",onClick:function(){return u(e)}},"Add to Library")))}))))};var _=function(){var e=Object(n.useContext)(C),t=function(){if(void 0!==e.selectedMovie&&void 0!==e.selectedCustomer){var t=e.selectedMovie,a=e.selectedCustomer;v.a.post("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/kb-videostore",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).API_BASE_URL,"rentals/").concat(t.title,"/check-out"),{customer_id:a.id,due_date:new Date(Date.now()+6048e5)}).then((function(t){S.store.addNotification({title:"Success!",message:"Rental has been created!",type:"success",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:1500}}),e.setSelectedCustomer(void 0),e.setSelectedMovie(void 0)})).catch((function(e){S.store.addNotification({title:"Warning",message:"Could not create a rental. Not enough inventory.",type:"warning",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:1500}})}))}},a=function(){if(void 0!==e.selectedMovie&&void 0!==e.selectedCustomer){var t=e.selectedMovie,a=e.selectedCustomer;v.a.post("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/kb-videostore",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).API_BASE_URL,"rentals/").concat(t.title,"/return"),{customer_id:a.id}).then((function(){S.store.addNotification({title:"Success!",message:"Rental has been returned! Thank you!",type:"success",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:1500}}),e.setSelectedCustomer(void 0),e.setSelectedMovie(void 0)})).catch((function(){S.store.addNotification({title:"Warning",message:"Oh no! Could not return the movie for some reason!",type:"warning",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:1500}})}))}};return c.a.createElement("div",{className:"jumbotron"},c.a.createElement("h1",{class:"display-3"},"RENTALS"),c.a.createElement("p",{class:"lead"},"Select a customer and a movie then do a checkout-out or check-in"),c.a.createElement("hr",{class:"my-2"}),c.a.createElement("p",null,"Selected Movie: ",c.a.createElement("strong",null,void 0===e.selectedMovie?"no movie selected":e.selectedMovie.title)),c.a.createElement("p",null,"Selected Customer: ",c.a.createElement("strong",null,void 0===e.selectedCustomer?"no customer selected":e.selectedCustomer.name)),c.a.createElement("div",{className:"rental-buttons-container"},c.a.createElement("button",{onClick:function(){return t()},className:"pizazz-btn"},"Rent a Movie"),c.a.createElement("button",{onClick:function(){return a()},className:"pizazz-btn"},"Return a Movie")))},C=(a(61),c.a.createContext()),N=function(){var e=Object(n.useState)(void 0),t=Object(r.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(void 0),u=Object(r.a)(i,2),v=u[0],f=u[1];return c.a.createElement(C.Provider,{value:{selectedCustomer:a,selectedMovie:v,setSelectedCustomer:o,setSelectedMovie:f}},c.a.createElement(l.a,null,c.a.createElement("div",{className:"App"},c.a.createElement(O.a,null),c.a.createElement(d,null),c.a.createElement(s.c,null,c.a.createElement(s.a,{path:"/",exact:!0,component:m}),c.a.createElement(s.a,{path:"/library",component:p}),c.a.createElement(s.a,{path:"/search",component:g}),c.a.createElement(s.a,{path:"/customers",component:E}),c.a.createElement(s.a,{path:"/rentals",component:_})))))},y=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function w(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a(62);i.a.render(c.a.createElement(N,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/kb-videostore",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/kb-videostore","/service-worker.js");y?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):w(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):w(e)}))}}()}},[[30,1,2]]]);
//# sourceMappingURL=main.5781f6cd.chunk.js.map